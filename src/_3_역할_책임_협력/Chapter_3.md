# Chapter_3 - 역할, 책임, 협력

## 협력

객체는 고립된 존재가 아닌 시스템 기능이라는 목표를 달성하기 위해 협력하는 존재이고, 이 **협력**은 객체지향 세계에서 기능을 구현할 수 있는 방법이다.

두 객체 사이의 협력은, **메시지 전송**을 통해 커뮤니케이션을 한다.

![img/Untitled.png](img/Untitled.png)

Screening과 Movie의 협력과정을 나타낸다. Screening은 Movie에 메시지를 전송함으로서 요청한다.

- 요금 계산과 관련된 처리를 위임하는 이유는, 처리에 대한 내용을 잘 알고 있는 객체가 Movie이기 때문
- 직접 접근해서 처리한다면, Movie의 내부 구현에 결합이 된다는 문제가 생김
- 더 심각한 것은, Movie의 **자율성**(자신의 상태를 직접 관리하는 것을 의미) 이 훼손된다는 점
- 객체를 자율적으로 만드는 기본적인 방법은 내부 구현을 **캡슐화**하는 것

객체들의 협력 ⇒ 행동을 결정한다.

객체의 행동 ⇒ 객체의 상태를 결정한다.

```jsx
public class Movie {
	private Money fee;
	private DiscountPolicy discountPolicy;

	public Money calculateMoneyFee(Screening screening){
		return fee.minus(discountPolicy.calculateDiscountAmount(screening));
	}
}
```

Movie가 기본 요금인 fee와, 할인 정책인 discountPolicy라는 상태 인스턴스를 변수로 들고있는 이유

→ 요금 계산이라는 **행동**을 수행하는데 이 정보들이 필요하기 때문

## 책임

협력에 참여하기 위해 객체가 수행하는 행동을 일컫는다.

'무엇을 알고 있는가', '무엇을 할 수 있는가'로 구성

- Movie는 요금을 계산하고 예매 가격을 계산할 수 있어야 함 **(하는 것에 대한 책임)**
가격과 어떤 할인이 적용됐는지 알고 있어야 함 **(아는 것과 관련된 책임)**
- Screening은 자신이 상영할 영화를 알고 있어야 함 **(아는 것과 관련된 책임)**

객체는 자신이 맡은 책임을 수행하는데 필요한 정보를 알고 있을 책임이 있고,
자신이 할 수 없는 작업을 도와줄 객체를 알고 있을 책임이 있으며,
책임을 수행하는데 필요한 정보도 알아야 할 책임이 있다.

![img//Untitled%201.png](img//Untitled%201.png)

예매라는 책임은 상영시간과 기본 요금을 가장 잘 알고 있는 Screening이 최선

가격계산이라는 책임은, 가격과 할인정보를 가장 잘 알고 있는 Movie가 최선

- RDD(책임 주도 설계, Responsibility-Driven Design)이란,
책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방식

메시지가 객체를 결정하는 것

행동이 상태를 결정하는 것

## 역할

객체는 협력이라는 문맥안에서 특정한 목적을 갖게 되고, 그 목적은 협력 안에서 객체가 맞게 되는 책임의 집합으로 표시된다. 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합

![img/Untitled%202.png](img//Untitled%202.png)

역할은 책임의 일부를 구현한 **추상 클래스**와 일체의 구현 없이 책임의 집합만을 나열해 놓은 **인터페이스** 활용

한 종류의 객체만 협력에 참여하는 상황에서는 어떤 것이 좋을까?

- 협력에 참여하는 후보가 여러 종류의 객체에 의해 수행될 필요가 있다면 **역할**,
단지 한 종류의 객체만이 협력에 참여할 필요가 있다면 **객체**

역할들의 상호작용으로 구성되는 것은 **협력
협력**을 구성하기 위해 **역할**에 적합한 **객체**가 선택
**객체**는 **클래스**를 이용해 구현되고 생성


notion : https://www.notion.so/ipaddress/Object-3-e45b07044e0e488d83dfd2bafe46ee8b